<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
    </head>
    <body>
        Coldbrew is loaded on this page. Open the console and use <code>Coldbrew.run()</code> to interact with Python.

        <script src='coldbrew.asm.js'></script>
        <script>
            window.runPython = Module.cwrap('runpython', 'number', ['string']);

            var onReady = function() {
                runPython("x = 5;");
                runPython("print('The value of x is: ', x)");
                runPython("import os");
                runPython("print(os.listdir('/lib/python3.5/'))");
                runPython("import _coldbrew_hello as hello\nhello.say_hello('Andreas')\nprint('It works!')\n");
            };

            // Wait for the module to be ready before calling any functions.
            var interval = setInterval(function () {
                if (Module.calledRun) {
                    window.clearInterval(interval);
                    onReady();
                }
            }, 100);
        </script>
    </body>
</html>
