var PThread,d,g,threadInfoStruct=0,selfThreadId=0,__performance_now_clock_drift=0,Module={};function e(){console.error(Array.prototype.slice.call(arguments).join(" ")),console.error(Error().stack)}this.addEventListener("error",function(a){if(-1!=a.message.indexOf("SimulateInfiniteLoop"))return a.preventDefault();var c=" in "+a.filename+":"+a.lineno+":"+a.colno;console.error("Pthread "+selfThreadId+" uncaught exception"+(a.filename||a.lineno||a.colno?c:"")+": "+a.message+". Error object:"),console.error(a.error)}),this.alert=function(){postMessage({cmd:"alert",text:Array.prototype.slice.call(arguments).join(" "),b:selfThreadId})},Module.instantiateWasm=function(a,c){return a=new WebAssembly.Instance(g,a),g=null,c(a),a.exports},this.onmessage=function(a){try{if("load"===a.data.cmd){if(Module.DYNAMIC_BASE=a.data.DYNAMIC_BASE,Module.DYNAMICTOP_PTR=a.data.DYNAMICTOP_PTR,Module.STACK_MAX=Module.STACKTOP=2147483647,Module.wasmModule=g=a.data.wasmModule,Module.wasmMemory=a.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.PthreadWorkerInit=a.data.PthreadWorkerInit,Module.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof a.data.urlOrBlob)importScripts(a.data.urlOrBlob);else{var c=URL.createObjectURL(a.data.urlOrBlob);importScripts(c),URL.revokeObjectURL(c)}Module=_Coldbrew_coldbrew_internal_(Module),PThread=Module.PThread,d=Module.HEAPU32,"undefined"!=typeof FS&&"function"==typeof FS.a&&FS.a(),postMessage({cmd:"loaded"})}else if("objectTransfer"===a.data.cmd)PThread.receiveObjectTransfer(a.data);else if("run"===a.data.cmd){__performance_now_clock_drift=performance.now()-a.data.time,threadInfoStruct=a.data.threadInfoStruct,Module.__register_pthread_ptr(threadInfoStruct,0,0),selfThreadId=a.data.selfThreadId;var h=a.data.stackBase,f=a.data.stackBase+a.data.stackSize;Module.STACK_BASE=f,Module.STACKTOP=f,Module.STACK_MAX=h,Module.establishStackSpace(a.data.stackBase,a.data.stackBase+a.data.stackSize),Module.establishStackSpaceInJsModule(a.data.stackBase,a.data.stackBase+a.data.stackSize),Module._emscripten_tls_init(),PThread.receiveObjectTransfer(a.data),PThread.setThreadStatus(Module._pthread_self(),1);try{var k=Module.dynCall_ii(a.data.start_routine,a.data.arg)}catch(b){if("Canceled!"===b)return void PThread.threadCancel();if("SimulateInfiniteLoop"===b||"pthread_exit"===b)return;if(Atomics.store(d,threadInfoStruct+4>>2,b instanceof Module.ExitStatus?b.status:-2),Atomics.store(d,threadInfoStruct+0>>2,1),Module._emscripten_futex_wake(threadInfoStruct+0,2147483647),!(b instanceof Module.ExitStatus))throw b}PThread.threadExit(k)}else"cancel"===a.data.cmd?threadInfoStruct&&0==PThread.thisThreadCancelState&&PThread.threadCancel():"setimmediate"!==a.data.target&&("processThreadQueue"===a.data.cmd?threadInfoStruct&&Module._emscripten_current_thread_process_queued_calls():(e("worker.js received unknown command "+a.data.cmd),console.error(a.data)))}catch(b){throw console.error("worker.js onmessage() captured an uncaught exception: "+b),console.error(b.stack),b}};
